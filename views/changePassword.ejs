<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Change Password - Communication LTD</title>
  <link rel="stylesheet" href="/css/style.css" />
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, private" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
</head>
<body class="change-page">
  <header><h1>Change Password</h1></header>

  <main class="container">
    <% if (error) { %><div class="error"><%= error %></div><% } %>
    <% if (success) { %><div class="success"><%= success %></div><% } %>

    <form action="/change-password" method="post" autocomplete="off">
      <label>Old Password:
        <input type="password" name="oldPassword" required autocomplete="current-password" />
      </label><br />
      <label>New Password:
        <input type="password" name="newPassword" required autocomplete="new-password" />
      </label><br />
      <label>Confirm New:
        <input type="password" name="confirmPassword" required autocomplete="new-password" />
      </label><br />
      <button type="submit">Update</button>
    </form>

    <div class="links" style="margin-top:12px">
      <!-- חשוב: onclick inline כדי להבטיח replace אפילו לפני שעלו הסקריפטים -->
      <a href="/system" class="replace-link" onclick="event.preventDefault();location.replace(this.href);">Back to System</a>
    </div>
  </main>

  <script>
    // לא לשמור querystring
    if (history.replaceState) history.replaceState(null, "", location.pathname);

    // ניווט ב-replace אם מישהו הסיר את ה-onclick
    document.querySelectorAll(".replace-link").forEach(function (a) {
      a.addEventListener("click", function (ev) {
        ev.preventDefault();
        location.replace(a.href);
      });
    });
  </script>
</body>
</html>





